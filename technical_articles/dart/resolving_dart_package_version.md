원문: https://iirokrankka.com/2018/08/28/resolving-dart-package-version-conflicts/

# Resolving Dart package version conflicts, faster than ever

Aug 28, 2018                      

**면책 조항 : 이것은 끝까지 읽으려고하는 기사 중 하나입니다.**

Flutter로 플레이 하고 프로젝트의 새로운 종속성을 소개할수록 어느 시점에서 종속성 충돌이 발생할 가능성이 커집니다. 특히 [중요한 업데이트](https://medium.com/dartlang/dart-2-stable-and-the-dart-web-platform-3775d5f8eac7)가 일어날 때 즈음에.

기회는 조만간 다음과 같이 될 것입니다:

```
Because intl_translation 0.17.0 depends on petitparser ^1.1.3 and xml >=3.2.0 depends on petitparser ^2.0.0, intl_translation 0.17.0 is incompatible with xml >=3.2.0.

So, because my_project depends on both xml ^3.2.0 and intl_translation 0.17.0, version solving failed.
```

오류 메시지에서 `xml`과 `intl_translation` 패키지의 이 버전들이 잘 작동하지 않는다는 것이 확실합니다. 이 패키지들은 `petitparser`의 다른 주 버전에 의존하기 때문에 여기에는 해결할 수 없는 의존성 버전 충돌이 있습니다.

pubspec 파일은 다음과 같이 약간 보일 수 있습니다.

pubspec.yaml 

```
dependencies:
  # ...
  xml: ^3.2.0
  intl_translation: ^0.17.0
```

우리는 [pub.dartlang.org](https://pub.dartlang.org/)로 가서 시행 착오를 통해 수동으로 호환 가능한 버전을 찾을 수 있지만, 그렇게 할 필요는 없습니다. 정확히 그걸 위해 만들어진 것이 있습니다. 또한 Pub에 내장되어 있으며 우리가 할 수있는 것보다 더 빨리 길을 닦습니다.

## The solution

이 문제를 해결하는 가장 빠른 방법은 충돌하는 두 종속성의 버전을 `any`로 설정하는 것입니다.

**잠깐만요 - 당신 생각이 뭔지 알아요. 우리는 그들을 남겨 두지 않을 것입니다.**

pubspec.yaml 

```
dependencies:
  # ...
  xml: any # <- 이런식으로 남겨두지 말아요. 미래에 읽습니다.
  intl_translation: any # <- 이런 식으로도 남겨 두지 말아요.
```

그것은 주요 버전 (`1.x.x - 2.x.x`)의 버전 제약 조건을 이제까지 존재했던 모든 버전의 패키지에 풀어 놓습니다.

**이것은 pub의 버전 구속력 해결사가 마술을 할 수있게 해줍니다.** 호환 가능한 패키지를 찾아보십시오. 이 변경 후,`flutter packages get`을 실행하여 의존성을 재구 축하십시오. 다음과 같은 경우가 발생할 수 있습니다:

```
Resolving dependencies... 
Got dependencies!
```

**우리는 아직 끝나지 않았습니다!**

프로젝트를 빌드 한 후에는 종속성 버전을 조여서 이전 버전과 마찬가지로 [의미적 버전 관리](https://www.dartlang.org/tools/pub/versioning#semantic-versions)를 사용해야합니다. 생성 된`pubspec.lock` 파일을 열고 이전에 충돌했던 의존성을 찾으십시오.

pubspec.lock 

```
# Generated by pub
# See https://www.dartlang.org/tools/pub/glossary#lockfile
packages:
  xml:
    # ...
    version: "3.0.1" # the version of "xml" package that worked fine
                     # with "intl_translation".
  intl_translation:
    # ...
    version: "0.17.0" # the version of "intl_translation" package
                      # that worked fine with "xml".
```

lockfile에서, 우리는 `xml` 패키지 버전 `3.0.1`과 `intl_translation` 패키지 버전 `0.17.0`이 잘 맞는지 확인할 수 있습니다. 마지막 단계로 pubspec 파일의 올바른 버전으로 `any`를 대체하십시오 :

pubspec.yaml 

```
dependencies:
  # ...
  xml: ^3.0.1
  intl_translation: ^0.17.0
```

마지막으로 'flutter packages get'을 실행하여 종속성을 다시 가져 와서 이것이 실제로 작동하는지 확인한 다음 잘 수행하는지 확인하십시오.

**Remember: you should never leave your versions as any**  - that’s simply just asking for trouble. Find the compatible versions  from pubspec.lock and use those ones. Having nondeterministic  dependencies is a surefire way of breaking your app in hard to debug  ways in the future. Just don’t do it.