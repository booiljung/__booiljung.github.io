# 컴퓨터 그래픽 모음

## 래스터, 복셀, 벡터 그래픽스

### [raster graphics](![img](https://upload.wikimedia.org/wikipedia/commons/thumb/3/3b/Rgb-raster-image.svg/220px-Rgb-raster-image.svg.png))

![img](https://upload.wikimedia.org/wikipedia/commons/thumb/3/3b/Rgb-raster-image.svg/220px-Rgb-raster-image.svg.png)

### [voxel graphics](https://en.wikipedia.org/wiki/Voxel)

![Voxel background 스톡 벡터, 이미지 및 벡터 아트 | Shutterstock](https://image.shutterstock.com/image-vector/vector-graphic-3d-rendering-fox-260nw-2131782771.jpg)

- 3차원 래스터 그래픽스
- 복셀이란 '3차원 픽셀'

#### 의료영상 복셀 예제

<iframe width="560" height="315" src="https://www.youtube.com/embed/ZK1yLBJ2MHM" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

### [vector graphics](https://ko.wikipedia.org/wiki/%EB%B2%A1%ED%84%B0_%EA%B7%B8%EB%9E%98%ED%94%BD%EC%8A%A4)

![img](https://upload.wikimedia.org/wikipedia/commons/thumb/8/8b/VectorBitmapExample_kor.png/220px-VectorBitmapExample_kor.png)

래스터 그래픽 도구

- [어도비 포토샵](https://www.adobe.com/kr/products/photoshop/landpa.html?gclid=Cj0KCQjw4PKTBhD8ARIsAHChzRK0qIaCzbpHb68buulFE2J_Myy46aH7jNXKFHw-lKs38vSYQfnOwmoaAlcWEALw_wcB&sdid=TBJRLR9V&mv=search&ef_id=Cj0KCQjw4PKTBhD8ARIsAHChzRK0qIaCzbpHb68buulFE2J_Myy46aH7jNXKFHw-lKs38vSYQfnOwmoaAlcWEALw_wcB:G:s&s_kwcid=AL!3085!3!460585117877!e!!g!!%ED%8F%AC%ED%86%A0%EC%83%B5!97967719!4837432399)
- 윈도우 페인터
- [GIMP](https://www.gimp.org/)

복셀 그래픽 도구

- [QUBICLE](https://www.minddesk.com/)

벡터 그래픽 도구

- [어도비 일러스트레이터](https://www.adobe.com/kr/products/illustrator.html)
- [코렐 드로우](https://www.coreldraw.com/en/)
- 윈도우용 트루타입 폰트

### 3차원 그래픽

#### 와이어 프레임 - 셰이딩 - 텍스처 매핑

![3D 아티스트를위한 최고의 리소스 웹 사이트 | 크리에이티브 온라인](https://www.creativosonline.org/wp-content/uploads/2016/08/modelos3d.jpg)

### 3D 모델링

![게임 캐릭터 모델링의 모든 것 초격차 패키지 Online. | 패스트캠퍼스](https://storage.googleapis.com/static.fastcampus.co.kr/prod/uploads/202106/130124-474/gcm-9-2-bg-0.5x.png)

### 텍스쳐 및 매핑

![Textures and Samplers in Metal – Metal by Example](https://d2jaiao3zdxbzm.cloudfront.net/wp-content/uploads/figure-30.png)

![Meet Spot.](https://d2jaiao3zdxbzm.cloudfront.net/wp-content/uploads/figure-27.png)

### 3D  모델링 도구

- [Autodesk 3D MAX](https://www.autodesk.co.kr/products/3ds-max/overview?mktvar002=5160842|SEM|13032940050|120689483503|kwd-3005349321&panel=buy&ef_id=Cj0KCQjwmuiTBhDoARIsAPiv6L9-HwHYBUpOXlJfUgLPp3rzsHMYXMRYX6CVwYWkkhzMulHjw229mpoaAk4iEALw_wcB:G:s&s_kwcid=AL!11172!3!520372896706!e!!g!!autodesk%203d%20max!13032940050!120689483503&mkwid=s|pcrid|520372896706|pkw|autodesk%203d%20max|pmt|e|pdv|c|slid||pgrid|120689483503|ptaid|kwd-3005349321|pid|&utm_medium=cpc&utm_source=google&utm_campaign&utm_term=autodesk%203d%20max&utm_content=s|pcrid|520372896706|pkw|autodesk%203d%20max|pmt|e|pdv|c|slid||pgrid|120689483503|ptaid|kwd-3005349321|&gclid=Cj0KCQjwmuiTBhDoARIsAPiv6L9-HwHYBUpOXlJfUgLPp3rzsHMYXMRYX6CVwYWkkhzMulHjw229mpoaAk4iEALw_wcB&term=1-YEAR&tab=subscription&plc=3DSMAX)
- [Blender](https://www.blender.org/)
- [Rhino](https://www.rhino3d.com/)

## 색공간

### RGB 색공간

Red, Green, Blue

![rgb color space cube at maximum values](https://docs.microsoft.com/en-us/windows/win32/wcs/images/rgbclrs1.png)

![rgb color space cube at minimum values](https://docs.microsoft.com/en-us/windows/win32/wcs/images/rgbclrs2.png)시시시시시

### HSV 색공간

- Hue (색상)
- Saturation (채도)
- Volume (명도)

![Hsv Cylinder - Free Transparent PNG Clipart Images Download](https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRMnkiHGHqqr_LBNDqQE8lFuPMlZt4RnBwZBpxb4tCfkTZ94_y9tEMk4-qwy8qrP9H8xEI&usqp=CAU)

### 배경이 무슨 색인가?

![](/home/booil/booiljung/booiljung.github.io/technical_articles/computer_graphics/links_of_computer_graphics.assets/image-20220510221243074.png)

### RGBA 컬러모델

- Red
- Green
- Blue
- Alpha (투명도)

![img](https://upload.wikimedia.org/wikipedia/commons/0/0b/RGBA_comp.png)



## 용어

- [정점(vertex) / 폴리곤(polygon) / 변(edge) / 메시(mesh)](https://hellowoori.tistory.com/30)

![img](https://t1.daumcdn.net/cfile/tistory/99BCFB4C5C360FD426)

### 정점(vertex)이란?

공간상에서의 위치(position)를 나타내는 것으로, 일반적으로 여러 개가 모여서 특정 형태의 오브젝트를 구성하는 요소를 정점 이라고 한다.

### 변(edge)란?

폴리곤에서 정점과 정점을 연결하는 직선을 변 또는 모서리라고 한다.

### 폴리곤(polygon)이란?

최소 3개의 정점이 모이면 하나의 면(face)을 만들 수 있다. 이렇게 3개의 정점으로 만들어진 삼각형을 폴리곤이라고 한다. 삼각형은 3D 물체의 기본 구성 요소이다.

### 메시(mesh)란?

니오넬 메시 (Messi)?

다다다![바르샤 원클럽맨 '메시' 지난 4년간 얼마 받았나 | 아주경제](http://image.ajunews.com//content/image/2021/01/31/20210131151524361000.jpg)

폴리곤이 모여서 하나의 3차원 물체를 만들게 되는데 이것을 메시라다고 한다. 즉, 메시는 폴리곤이 모여서 만들어진 3차원 공간상의 객체(object)이다.

메시의 삼각형은 우리가 모델링하는 물체의 기본적인 구성 성분이 되며, 메시 삼각형을 폴리곤(polygon) 혹은 기본형(primitive) 이라고도 부른다. 

폴리곤에서 두 개의 변이 만나는 지점을 정점(vertex) 이라고 한다.

하나의 삼각형을 만들기 위해서는 삼각형의 세 정점에 해당하는 세 개의 포인트 위치를 저장해야하며, 이 삼각형을 지정하여 물체를 묘사한다. 

### Vertices - edges - faces - polygons - surfaces

![Elements of polygonal mesh modeling.](https://upload.wikimedia.org/wikipedia/commons/thumb/6/6d/Mesh_overview.svg/720px-Mesh_overview.svg.png)

### [고급 과정 - Polygon mesh](https://en.wikipedia.org/wiki/Polygon_mesh)

## 좌표계

### 모델 공간 (Model space 또는 Local space), 모델 좌표계

(3D) 모델 또는 객체가 자체적인 좌표 공간을 가진다.

예를 들자면 병이 있다. 병 바닥 중심에 원점이 있고, 이 원점을 기준으로 정점(Vertex)들이 위치한다.

![Coca Cola Bottle 3D Model](https://www.3dcadbrowser.com/th/2/80/80575.jpg)

### 월드 공간 (World space), 월드 좌표계

세계를 하나의 통일된 절대적인 좌표계로 표현, 모든 객체를 동일한 하나의 좌표계에 배치한다. 객체들의 위치와 방향을 표현하기 위한 좌표계다. 모델 좌표계로 표현된 모델(객체)들은 월드 좌다다다표계에서 그 방향과 위치가 표현되어야 하는데, 이때 모델 좌표계로 표현된 매시는 월드 좌표계로 변환되어야 한다. 이때 월드 변환 행렬이 적용된다.

### 뷰포트 좌표계 (NDC; Normalized Device Coordinates)

- 투영 변환의 결과My Programming Box: Screen Transform (화면 변환)
- 중앙이 (0, 0)
- 좌측 하단이 (-1, -1)
- 우측 상단이 (+1, +1)

![img](https://3.bp.blogspot.com/-HIb7Exxar7U/UTIQ71sbRQI/AAAAAAAABAM/PtUWWa-3CyI/s1600/screen_transform.png)

예를 들어 월드 공간에 위치한 특정 정점이 카메라 공간 안으로 연산이 되면 정규 장치 좌표계 (뷰포트 좌표계)로 변환 된다.

### 스크린 공간 (screen space)

- 좌측 상단이 (0, 0)
- 2차원 공간

![My Programming Box: Screen Transform (화면 변환)](https://3.bp.blogspot.com/-j4chflWsrLQ/UTIQ_mQ_XOI/AAAAAAAABAU/nTjcKlYgjY8/s1600/screen_transform2.png)

뷰포트 좌표계는 장치(화면)에 중립적인 좌표계를 가지고 있다. 최종적으로 화면에 그려지기 위해서는 화면 공간으로 변환되어야 한다.

## 공간 변환 과정

1. 로컬 공간의 정점은 월드 공간상의 정점으로 변환 된다.
2. 월드 공간상의 정점은 카메라 공간의 정점으로 변환된다.
3. 카메라 공간의 점은 스크린 공간으로 변환된다.

## 벡터 (Vector)

$$
\begin{bmatrix}
x \\
y \\
z \\
\end{bmatrix}
$$

### 동차좌표계 (homogenious)

$$
\begin{bmatrix}
x \\
y \\
z \\
w \\
\end{bmatrix}
$$

[동차좌표](https://ko.wikipedia.org/wiki/%EB%8F%99%EC%B0%A8%EC%A2%8C%ED%91%9C)

요약하면 - 특정 좌표가 여러가지(무한대) 좌표로 나타낼 수 있다.

컴퓨터 그래픽에서 여러가지 이유로 동차좌표계를 사용, 컴퓨터 그래픽에서 w가 0이면 벡터, 0이 아니면 동차 좌표다.

동차좌표 (1, 1, 1, 1), (2, 2, 2, 2), (0.5, 0.5, 0.5, 0.5) 는 모두 같은 좌표를 나타낸다.

 w가 1이 되도록 w로 나누면 비교 가능. w가 1이 되도록 w로 나누면 비교 가능. w가 1이 되도록 w로 나누면 비교 가능. w가 1이 되도록 w로 나누면 비교 가능. w가 1이 되도록 w로 나누면 비교 가능.

[친철한 책 Homogeneous Coordinates andComputer Graphics](http://www.geometer.org/mathcircles/cghomogen.pdf)

## 행렬 (Matrix)

그래픽에서 4x4 행렬을 사용.

단위 행렬
$$
\begin{bmatrix}
1 & 0 & 0 & 0 \\
0 & 1 & 0 & 0 \\
0 & 0 & 1 & 0 \\
0 & 0 & 0 & 1 \\
\end{bmatrix}
$$

### 행렬과 벡터의 곱 (Product)

벡터는 열이 1개인 행렬이기도 한다. 곱 할 수 있는가?
$$
\begin{bmatrix}
x \\
y \\
z \\
\end{bmatrix}
\times
\begin{bmatrix}
1 & 0 & 0 & 0 \\
0 & 1 & 0 & 0 \\
0 & 0 & 1 & 0 \\
0 & 0 & 0 & 1 \\
\end{bmatrix}
$$

Nop
$$
\begin{bmatrix}
x \\
y \\
z \\
w \\
\end{bmatrix}
\times
\begin{bmatrix}
1 & 0 & 0 & 0 \\
0 & 1 & 0 & 0 \\
0 & 0 & 1 & 0 \\
0 & 0 & 0 & 1 \\
\end{bmatrix}
$$

## 오일러 각

3차원 공간에서 회전을 표현하는 방법 - 인간에게 친인숙 하다. 버뜨...
$$
\begin{bmatrix}
r_x \\
r_y \\
r_z \\
\end{bmatrix}
$$




![Orientation coordonnees spheriques generalisees.png](https://upload.wikimedia.org/wikipedia/commons/thumb/e/e2/Orientation_coordonnees_spheriques_generalisees.png/250px-Orientation_coordonnees_spheriques_generalisees.png)다다

![Eulerangles.svg](https://upload.wikimedia.org/wikipedia/commons/thumb/a/a1/Eulerangles.svg/250px-Eulerangles.svg.png)다



### 짐벌락 (2분 30초)

<iframe width="1120" height="630" src="https://www.youtube.com/embed/zc8b2Jo7mno" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

- [짐벌락과 사원수](https://cutemoomin.tistory.com/entry/%EC%A7%90%EB%B2%8C%EB%9D%BDgimbal-lock%EA%B3%BC-%EC%82%AC%EC%9B%90%EC%88%98%EC%BF%BC%ED%84%B0%EB%8B%88%EC%96%B8-quaternion)

## 사원수 (Quaternion)

벡터와 행렬의 발명 그 이전에는 2차원 문제에서 복소 평면 사용. 3차원 문제에서 복소수를 활용할 수 있는가? 이 물음에 대한 답이 해밀턴이 발명한 사원수. 8년동안 연구 끝에 발명한 것이니 이해 못한다고 낙담 말자. 이미 만들어진 함수를 사용하는 방법은 쉽다. [조금은 느리게 살자](https://ghebook.blogspot.com/2010/07/quaternion.html)

*참고 : 영상이나 음성 같은 신호 처리시 코사인이 사용되는데 복소 평면과 코사인은 단짝이다.*

3D 그래픽에서 회전을 표현하는 방법에는 3가지가 있다.

1. 오일러 각 - 짐벌락 문제가 있다.
2. 사원수
3. 회전 행렬 - 4x4로 덩치가 크다.

 복소수:
$$
a + bi
$$
사원수:
$$
a + bi +cj +dk
$$
실수부 1개, 허수부 1개.

그래픽 라이브러리들은 사원수 관련 클래스들이 정의 되어 있고, 오픈소스들도 활용할 수 있다. 이해는 나중에 해도 된다.

- [Unity Quaternion](https://docs.unity3d.com/ScriptReference/Quaternion.html)
- Ogre 3D 사원수 [OgreQuaternion.h](https://github.com/OGRECave/ogre/blob/master/OgreMain/include/OgreQuaternion.h) [OgreQuaternion.cpp](https://github.com/OGRECave/ogre/blob/master/OgreMain/src/OgreQuaternion.cpp)
  - 오일러 각을 사원수로 변경터
  - 사원수를 오일러각으로 변경
  - 특정 사원수에서 다른 사원수 사이를 보간 하기
  - 길이를 정규화 하기
  - 내적 구하기 등

이런게 있다고 알고 넘어가도  개발 가능하다.

## 다시 벡터

### 내적 (dot product)

두 벡터의 내적을 구하는 식이나 코드는 검색해 보면 많다. 벡터의 내적을 어떨 경우에 사용하는가?

두 벡터의 내적은 두 벡터가 어느 정도 다른 방향을 가리키는지 알 수 있게 한다.

벡터의 내적은 두벡터 방향의 코사인 값이다.

방향이 같으면 1, 방향이 수직이면 0, 방향이 전혀 다르면 -1이다. 

코사인 값은 $\arccos \theta$ 로 호도법(라다인)을 구할 수 있고, 다시 라디안은 사람에게 친숙한 육십분법으로 변환 할 수 있다.

### 벡터의 외적 (cross product) 

두 벡터의 외적을 구하는 식이나 코드는 검색해 보면 많다. 벡터의 외적을 어떨 경우에 사용하는가?

두 벡터의 외적은 두 벡터에 수직인 단위 벡터를 얻는다. 이처럼 평면 등에 수직인 벡터를 법선벡터(Normal Vector) 이라고 한다. 평면의 방향을 기술 할때는 법선벡터로 표현 한다. [FINDMEAN](http://www.findmean.com/%EC%88%98%ED%95%99/%EB%B2%A1%ED%84%B0/%EB%B2%A1%ED%84%B0%EC%9D%98-%EC%99%B8%EC%A0%81/)

이 법선벡터와 다른 벡터를 dot를 하면 평면의 방향을 알 수 있다.

예를 들어 카메라가 특정 면을 보고 있을때, 그면의 법선벡터와 카메라와의 방향 베터를 비교하면 그 면을 그릴지 말지를 결정 할 수 있다.

## 다시 행렬

그래픽에서는 왜 4x4를 사용하는가?

- v동차좌표계를 사용하기 때문.

왜 동차좌표계를 사용하는가?

- 로컬, 월드, 뷰포트, 스크린 등의 공간을 넘나들기 때문.
- 이동을 해야 하기 때문. 이동은 선형 변환이 아니라 아핀 변환이다.

[게임프로그래밍](https://m.blog.naver.com/PostView.naver?isHttpsRedirect=true&blogId=znfgkro1&logNo=80174113848)

[선형변환과 아핀변환](https://codingfarm.tistory.com/377)

### 비례 변환 (Scale 확대축소)

3x3 행렬로도 충분하지만
$$
S = \begin{bmatrix}
	s_x & 0 & 0 \\
	0 & s_y & 0 \\
	0 & 0 & s_z
\end{bmatrix}
$$
실제는 4x4 행렬 사용. 왜? 이동 행렬이 4x4이고 이것과 곱해야 하니까.
$$
S = \begin{bmatrix}
	s_x & 0 & 0 & 0\\
	0 & s_y & 0 & 0\\
	0 & 0 & s_z & 0\\
	0 & 0 & 0 & 1
\end{bmatrix}
$$
벡터 $V$를 스케일 하려면
$$
U = V \cdot S
$$

### 회전 변환 (Rotation transform)

회전 변환 행렬도 3x3으로 충분하지만, 4x4 행렬을 사용한다.
$$
R_x =  \begin{bmatrix}
	1 & 0 & 0 & 0 \\
	0 & \cos \theta & \sin \theta & 0  \\
	0 & - \sin \theta  & \cos \theta & 0 \\
	0 & 0 & 0 & 1
\end{bmatrix}
\\
R_y = \begin{bmatrix}
	\cos \theta & 0 & - \sin \theta & 0 \\
	0 & 1 & 0 & 0 \\
	\sin \theta & 0 & \cos \theta & 0
	\\  0 & 0 & 0 & 1
\end{bmatrix}
\\
R_z = \begin{bmatrix}
	\cos \theta & \sin \theta & 0 & 0 \\
	-\sin \theta & \cos \theta & 0 & 0 \\
	0 & 0 & 1 & 0 \\  0 & 0 & 0 & 1
\end{bmatrix}
$$
벡터 $V$를 회전하고 싶다면
$$
R = R_x \cdot R_y \cdot R_z
\\
U = V \cdot R
$$

### 이동 변환 (Translation transform)

이동 변환 행렬은 4x4 행렬이다.
$$
T =  \begin{bmatrix}
	1 & 0 & 0 & 0 \\
	0 & 1 & 0 & 0 \\
	0 & 0 & 1 & 0 \\
	t_x & t_y & t_z & 1
\end{bmatrix}
$$
벡터 V를 이동하려면
$$
U = V \cdot T
$$
위 이동행렬의 전치 행렬
$$
T^\top =  \begin{bmatrix}
	1 & 0 & 0 & t_x \\
	0 & 1 & 0 & t_y \\
	0 & 0 & 1 & t_z \\
	0 & 0 & 0 & 1
\end{bmatrix}
$$
자료에 따라 회전행렬, 이동행렬이 전치되어 다를 수 있다.

이 차이는 

- 왼손 좌표계냐
- 오른손 좌표계냐

벡터, 행렬, 사원수 곱의 교환 법칙은 성립하지 않는다.

- 벡터에 행렬을 곱하느냐?
- 행렬에 벡터를 곱하느냐?

즉
$$
U = V \cdot T
$$
로 할것인가?
$$
U = T \cdot V
$$
로 할것인가?

라이브러리 개발자의 선택에 따라 다르다.

## 참조

- [화면 변환](https://mycom333.blogspot.com/2013/03/screen-transform.html?m=0) 