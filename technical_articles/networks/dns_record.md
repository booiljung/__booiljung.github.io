# DNS 레코드

**레코드 이름:**

FQDN (정규화 된 도메인 이름)에는 영역 이름이 포함 되지만 상대 이름은 포함 되지 않는다.

**A 레코드:**

주소 레코드 또는 호스트 레코드라고도 한다. 도메인 서비스를 호스팅하는 컴퓨터의 실제 IP 주소에 도메인을 연결 한다. 주어진 호스트에 대한 IP 주소 (IPv4)를 알려주며 도메인 이름을 해당하는 IP 주소로 변환하는 데 사용된다. 하나의 Domain Name에 여러 개의 IP 주소를 등록할 수 있다.

**AAAA 레코드:**

주어진 호스트에 대해 IPv6 주소를 알려준다. 결국 A 레코드와 같은 방식으로 작동하며 차이점은 IPv6 주소 유형이다.

**CNAME 레코드:**

정식 이름 레코드는 다른 실제 또는 정식 도메인 이름에 별칭 이름을 연결. 예를 들어 www.example.com은 *example.com*에 연결할 수 있다.

즉, CNAME 레코드는 도메인 이름의 별칭을 만드는 데 사용된다. CNAME 레코드는 도메인을 외부 도메인으로 별칭을 지정하려는 경우 유용하다. 경우에 따라 CNAME 레코드를 제거하고 A 레코드로 대체하면 성능 오버 헤드를 줄일 수도 있다.

**CAA 레코드:**

도메인 소유자가 자신의 도메인에 대한 인증서를 발급할 권한이 있는 CA(인증 기관)를 지정할 수 있다. 이렇게 하면 일부 환경에서는 인증서가 착오 발급되는 것을 방지할 수 있다. CAA 레코드에는 다음 세 가지 속성이 있다.

- **Flags**: [RFC](https://tools.ietf.org/html/rfc6844#section-3)마다 특별한 의미를 갖는 중요한 플래그를 나타내는 데 사용되는 0과 255 사이의 정수.
- **Tag**: ASCII 문자열이며 다음 중 하나일 수 있다.
  - **issue**: 인증서(모든 유형)를 발급할 권한이 있는 CA를 지정하려는 경우에 사용.
  - **issuewild**: 인증서(와일드카드 인증서만 해당)를 발급할 권한이 있는 CA를 지정하려는 경우에 사용.
  - **iodef**: 권한이 없는 인증서 발급 요청에 대해 알릴 수 있는 메일 주소 또는 호스트 이름을 지정.
- **Value**: 선택한 특정 태그에 대한 값.

**NS 레코드:**

네임서버 레코드는 도메인에 대해 어떤 서버가 DNS 정보를 전달할지 결정. 일반적으로 도메인에 기본 및 보조 네임서버 레코드가 있다. 영역 루트의 NS 레코드 집합(name `@`)은 각 DNS 영역과 함께 자동으로 생성되며 영역이 삭제될 경우 자동으로 삭제 된다(별도로 삭제할 수 없음). 소유 도메인과 하위 도메인에 대한 네임서버를 지정할 수 있다.

**MX 레코드:**

Main Exchange 레코드는 DNS 도메인 이름에 대한 메일 교환 서버를 알려 준다. 이 정보는 SMTP (Simple Mail Transfer Protocol)가 전자 메일을 적절한 호스트로 라우팅하는 데 사용한다. 일반적으로 DNS 도메인에 대해 둘 이상의 메일 교환 서버가 있으며 각 도메인에 우선 순위가 설정된다.

**PTR (Reverse-lookup Pointer records)**

정방향 DNS 확인 (A 및 AAAA 레코드)과 달리 PTR 레코드는 IP 주소를 기반으로 도메인 이름을 찾는 데 사용된다

**TXT 레코드:**

TXT 레코드는 도메인 외부 소스에 다양한 목적으로 사용될 수 있는 텍스트 정보를 제공하는 DNS 레코드. 레코드 값은  사람이나 컴퓨터가 읽을 수 있는 텍스트가 될 수 있다. 텍스트 레코드는 형식이 지정되지 않은 임의의 텍스트 문자열을 저장할 수 있다. 파일도 가능하다. 일반적으로 이 레코드는 SPF (Sender Policy Framework)가 당신이 보낸것 처럼 보이도록 하는 가짜 전자 메일을 막기 위해서 사용한다.

**TTL:**

Tile To Live는 다음 레코드 변경사항이 적용될 때까지 걸리는 시간(초)을 결정하는 DNS 레코드 값. MX 레코드,  CNAME 레코드 등 도메인의 각 DNS 레코드에는 TTL 값이 포함 된다. 레코드의 현재 TTL은 변경사항이 적용될 때까지  걸리는 시간을 결정 한다. 예를 들어 TTL 값이 86400초인 레코드는 변경사항은 적용될 때까지 24시간이 소요 된다.

레코드의 TTL을 변경하면 *향후* 변경사항이  적용되는 시간에 영향을 줍니다. 인터넷상의 서버가 레코드의 업데이트 사항을 매시간 확인하도록 TTL 값을 3600으로 설정하는  것이 좋다. 단축된 TTL은 이전 기간이 만료된 후에만 효력을 발생 한다. 이렇게 하면 향후 레코드를 업데이트할 경우  변경사항이 적용될 때까지 한 시간이 소요 된다. 변경사항을 신속하게 되돌릴 필요에 대비하는 등 다음 변경사항이 더욱 빠르게  적용되도록 하려면 TTL을 300초(5분)와 같이 더 짧게 설정할 수도 있다. MX 레코드가 올바르게 구성되면 TTL 값을  86,400으로 설정하는 것이 좋다. 그렇게 하면 인터넷상의 서버에서 24시간마다 확인하여 MX 레코드를 업데이트 한다.

**SOA:**

Start of Authority 레코드는 기본 이름 서버, 도메인 관리자의 전자 메일, 도메인 일련 번호 및 영역 새로 고침과 관련된 여러 타이머를 포함하여 DNS 영역에 대한 핵심 정보를 지정 한다.

**SPF 레코드란?**

Sender Policy Framework는 일반적으로 메일 발송 관련하여 ‘발송자의 메일 서버 정보’와 ‘메일 서버 정보’가 일치하는지 확인할 때 이용 된다. 발송 서버에서 발송한 메일이 스팸 처리되지 않도록 하기 위해서는 SPF나 TXT에 아래 정보가 꼭 필요하다.

메일 발송 서버가 존재하는 경우에는 SPF와 TXT에 입력되어 있어야 합니다.

SPF를 인식하지 못하는 버전의 메일 수신 서버에서는 TXT에 동일한 정보를 입력하지 않으면 스팸 메일로 처리해서 반송될 수 있다. SPF와 TXT 두 개 레코드로 관리할 경우 동일한 정보로 관리해야 한다.

## 참조

- [구글 지원](https://support.google.com/a/answer/48090?hl=ko)
- [DNS 영역 및 레코드 개요](https://docs.microsoft.com/ko-kr/azure/dns/dns-zones-records)